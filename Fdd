local allowedPlayers = {
	"bannaboy89917"
}

local player = game.Players.LocalPlayer
local isAllowed = false

print("Current Player:", player.Name)

for _, username in ipairs(allowedPlayers) do
	print("Checking against:", username)
	if player.Name:lower() == username:lower() then
		isAllowed = true
		break
	end
end

if not isAllowed then
	wait(1)
	player:Kick("This Script isn't yours")
	return
end

local Library = loadstring(game:HttpGetAsync("https://github.com/ActualMasterOogway/Fluent-Renewed/releases/latest/download/Fluent.luau"))()
local SaveManager = loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/ActualMasterOogway/Fluent-Renewed/master/Addons/SaveManager.luau"))()
local InterfaceManager = loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/ActualMasterOogway/Fluent-Renewed/master/Addons/InterfaceManager.luau"))()

local Window = Library:CreateWindow{
	Title = "Test Us",
	SubTitle = "by Masterboy123",
	TabWidth = 160,
	Size = UDim2.fromOffset(980, 800),
	Resize = true,
	MinSize = Vector2.new(470, 380),
	Acrylic = true,
	Theme = "Dark",
	MinimizeKey = Enum.KeyCode.RightControl
}

local Tabs = {
	Main = Window:CreateTab{
		Title = "Main",
		Icon = "repeat"
	},
	Settings = Window:CreateTab{
		Title = "Settings",
		Icon = "settings"
	}
}

local function unequipAllPets()
	local petsFolder = game:GetService("Players").LocalPlayer.petsFolder
	for _, folder in pairs(petsFolder:GetChildren()) do
		if folder:IsA("Folder") then
			for _, pet in pairs(folder:GetChildren()) do
				game:GetService("ReplicatedStorage").rEvents.equipPetEvent:fireServer("unequipPet", pet)
			end
		end
	end
end

local function equipUniquePet(petName)
	unequipAllPets()
	for _, pet in pairs(game:GetService("Players").LocalPlayer.petsFolder.Unique:GetChildren()) do
		if pet.Name == petName then
			game:GetService("ReplicatedStorage").rEvents.equipPetEvent:fireServer("equipPet", pet)
		end
	end
end

local function findMachine(machineName)
	local machine = workspace.machinesFolder:FindFirstChild(machineName)
	if not machine then
		for _, folder in pairs(workspace:GetChildren()) do
			if folder:IsA("Folder") and folder.Name:find("machines") then
				machine = folder:FindFirstChild(machineName)
				if machine then
					break
				end
			end
		end
	end
	return machine
end

local function pressE()
	local vim = game:GetService("VirtualInputManager")
	vim:SendKeyEvent(true, "E", false, game)
	task.wait(0.1)
	vim:SendKeyEvent(false, "E", false, game)
end

local function useOneEgg()
	local protein = game.Players.LocalPlayer.Backpack:FindFirstChild("Protein Egg")
	if protein then
		protein.Parent = game.Players.LocalPlayer.Character
		task.wait(0.1)
		local virtualInput = game:GetService("VirtualInputManager")
		virtualInput:SendMouseButtonEvent(0, 0, 0, true, game, 1)
		task.wait(0.5)
		virtualInput:SendMouseButtonEvent(0, 0, 0, false, game, 1)
	end
end

local isRunning = false
local MainToggle = Tabs.Main:CreateToggle("UltimateFarm", {
	Title = "Ultimate Auto Farm",
	Default = false,
	Callback = function(Value)
		isRunning = Value
		getgenv().lift = Value
		game:GetService("ReplicatedStorage").rEvents.changeSpeedSizeRemote:InvokeServer("changeSize", 1)
		if not Value then
			unequipAllPets()
			for _, connection in pairs(getconnections(game:GetService("RunService").RenderStepped)) do
				connection:Disable()
			end
			return
		end
		task.spawn(function()
			while isRunning do
				local boostFolder = game.Players.LocalPlayer:FindFirstChild("boostTimersFolder")
				local eggTimer = boostFolder and boostFolder:FindFirstChild("Protein Egg")
				if eggTimer then
					local timeLeft = tonumber(eggTimer.Value)
					if timeLeft == 25 then
						useOneEgg()
					end
				end
				local machine = findMachine("Jungle Bar Lift")
				if machine and machine:FindFirstChild("interactSeat") then
					local character = game.Players.LocalPlayer.Character
					if character and character:FindFirstChild("HumanoidRootPart") then
						character.HumanoidRootPart.CFrame = machine.interactSeat.CFrame * CFrame.new(0, 3, 0)
						task.wait(0.5)
						pressE()
					end
				end
				local player = game.Players.LocalPlayer
				local rebirths = player.leaderstats.Rebirths.Value
				local rebirthCost = 10000 + (5000 * rebirths)
				if player.ultimatesFolder:FindFirstChild("Golden Rebirth") then
					local goldenRebirths = player.ultimatesFolder["Golden Rebirth"].Value
					rebirthCost = math.floor(rebirthCost * (1 - (goldenRebirths * 0.1)))
				end
				for i = 1, 8 do
					task.spawn(function()
						while isRunning and player.leaderstats.Strength.Value < rebirthCost do
							game:GetService("Players").LocalPlayer.muscleEvent:FireServer("rep")
							task.wait()
						end
					end)
				end
				if player.leaderstats.Strength.Value >= rebirthCost then
					unequipAllPets()
					equipUniquePet("Tribal Overlord")
					game:GetService("ReplicatedStorage").rEvents.rebirthRemote:InvokeServer("rebirthRequest")
					task.wait(0.2)
					equipUniquePet("Swift Samurai")
				end
				if not isRunning then
					break
				end
				task.wait(0.1)
			end
		end)
	end
})

local Toggle = Tabs.Settings:CreateToggle("FrameToggle", {
	Title = "Hide All Frames",
	Description = "Toggle ON to hide all game frames",
	Default = false,
	Callback = function(Value)
		local rSto = game:GetService("ReplicatedStorage")
		for _, obj in pairs(rSto:GetChildren()) do
			if obj.Name:match("Frame$") then
				obj.Visible = not Value
			end
		end
	end
})

local GrindToggle = Tabs.Main:CreateToggle("SpeedGrind", {
	Title = "Speed Grind (No Rebirth)",
	Default = false,
	Callback = function(Value)
		local isGrinding = Value
		if not Value then
			unequipAllPets()
			for _, connection in pairs(getconnections(game:GetService("RunService").RenderStepped)) do
				connection:Disable()
			end
			return
		end
		equipUniquePet("Swift Samurai")
		for i = 1, 17 do
			task.spawn(function()
				while isGrinding do
					game:GetService("Players").LocalPlayer.muscleEvent:FireServer("rep")
					task.wait()
				end
			end)
		end
	end
})

SaveManager:SetLibrary(Library)
InterfaceManager:SetLibrary(Library)
SaveManager:IgnoreThemeSettings()
SaveManager:SetFolder("AutoLiftConfig")
InterfaceManager:SetFolder("AutoLiftConfig")
InterfaceManager:BuildInterfaceSection(Tabs.Settings)
SaveManager:BuildConfigSection(Tabs.Settings)
Window:SelectTab(1)
SaveManager:LoadAutoloadConfig()

Library:Notify{
	Title = "Script Loaded",
	Content = "Ultimate Farm Ready! ðŸ’ª",
	Duration = 5
}
